# Виртуальный процессор
## Описание
Прогораммы, написанные на языке С, которые симулируют работу ассемблера и процессора.\
Процессор имеет 16 регистров и 80000 байт оперативной памяти (10000 элементов типа `double`).\
Язык ассемблера имеет 13 команд:
| команда | аргумент | описание |
|:-----:|:--------------------------------:|---|
|`push` | число/обращение к памяти/регистр | добавляет элемент в стек|
|`pop`  | число/обращение к памяти/регистр | удаляет аргумент из стека, присваивает значение удаленного элемента аргументу|
|`add`  |-|удаляет два последних элемента из стека и добавляет в стек их сумму|
|`sub`  |-|удаляет два последних элемента из стека и добавляет в стек их разность|
|`mul`  |-|удаляет два последних элемента из стека и добавляет в стек их произведение|
|`div`  |-|удаляет два последних элемента из стека и добавляет в стек их частное|
|`in`   |-|добавляет в стек число из командной строки|
|`out`  |-|удаляет элемент из стека и выводит его значение в терминал
|`graph`|-|выводит оперативную память в термниал в символьном фомате в виде матрицы 100*100|
|`jmp`  |метка|переход по метке|
|`call` |метка|переход по метке, добавление метки возвращения в стек возврата|
|`ret`  |-|переход по последней метке из стека возврата|
|`hlt`  |-|принудительное завершение работы программы|

#### команды типа `jmp`:
| команда | условие |
|---|---|
|`jmp`|безусловный переход по метке|
|`ja` |если последний элемент стека больше предпоследнего|
|`jb` |если последний элемент стека меньше предпоследнего|
|`jee`|если последний элемент стека равен предпоследнему|
|`jae`|если последний элемент стека больше или равен предпоследнему|
|`jbe`|если последний элемент стека меньше или равен предпоследнему|

Файл с исхожным кодом на языке ассемблера имеет расширение `.txt`.\
После ассемблирования он преобразуется в машинный код, файл с машинным кодом имеет расширениее `.code`.\
Далее файл с машинным кодом выполняется процессором.

## Сборка
Клонируйте репозиторий.\
Назначьте файлу `build.sh` права на выполнение, а затем запустите скрипт.
```bash
chmod +x build.sh
./build.sh
```
**Все, сборка проекта завершена!**

В папке `bin/` будут сохранены исполняемые файлы `asm`, `cpu` и `make`.

Программа `asm` в качестве аргумента командной строки принимает путь к исходному файлу на языке ассемблера с расширением `.txt` и создает файл с машинным кодом с расширением `.code`.

Программа `cpu` принимает в качестве аргумента путь к файлу с машинным кодом с расширением `.code`  и выполняет его.

Программа `make` выполняет оба прудыдущих действия сразу, принимает в качестве аргумента путь к исходному файлу на языке ассемблера с расширением `.txt`
## Примеры
В папке `exemples` приведены два примера: `circle.txt` и `fac.txt`.


